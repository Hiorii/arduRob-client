{"ast":null,"code":"import _slicedToArray from\"/home/hiorii/Desktop/arduRob/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from'react';import styles from'./ProductList.module.scss';import Filters from'../Filters/Filters';import ProductBox from'../ProductBox/ProductBox';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductList=function ProductList(_ref){var products=_ref.products,categories=_ref.categories,subCategories=_ref.subCategories;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allProducts=_useState2[0],setAllProducts=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),productsPerPage=_useState4[0],setProductsPerPage=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),pageNumbers=_useState6[0],setPageNumbers=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var _useState9=useState(8),_useState10=_slicedToArray(_useState9,1),itemsPerPage=_useState10[0];var _useState11=useState(5),_useState12=_slicedToArray(_useState11,1),pageNumberLimit=_useState12[0];var _useState13=useState(5),_useState14=_slicedToArray(_useState13,2),maxPageNumberLimit=_useState14[0],setMaxPageNumberLimit=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),minPageNumberLimit=_useState16[0],setMinPageNumberLimit=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),byCategory=_useState18[0],setByCategory=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),productInitializer=_useState20[0],setProductInitializer=_useState20[1];var changePage=function changePage(e){setCurrentPage(e.target.id);};var pageNumberSetter=useCallback(function(){var pages=[];for(var i=1;i<=Math.ceil(allProducts.length/itemsPerPage);i++){pages.push(i);}setPageNumbers(pages);},[allProducts.length,itemsPerPage]);var renderPageNumber=pageNumbers.map(function(number){if(number<maxPageNumberLimit+1&&number>minPageNumberLimit){return/*#__PURE__*/_jsx(\"li\",{id:number,onClick:function onClick(e){return changePage(e);},className:currentPage===number?styles.activePage:null,children:number},number);}else{return null;}});var handleNextBtn=function handleNextBtn(){setCurrentPage(currentPage+1);if(currentPage+1>maxPageNumberLimit){setMaxPageNumberLimit(maxPageNumberLimit+pageNumberLimit);setMinPageNumberLimit(minPageNumberLimit+pageNumberLimit);}};var handlePrevBtn=function handlePrevBtn(){setCurrentPage(currentPage-1);if((currentPage-1)%pageNumberLimit===0){setMaxPageNumberLimit(maxPageNumberLimit-pageNumberLimit);setMinPageNumberLimit(minPageNumberLimit-pageNumberLimit);}};// let pageIncrementBtn = null;\n// if (pageNumbers.length > maxPageNumberLimit) {\n//   pageIncrementBtn = <li onClick={handleNextBtn}>...</li>;\n// }\n// let pageDecrementBtn = null;\n// if (pageNumbers.length > maxPageNumberLimit) {\n//   pageDecrementBtn = <li onClick={handlePrevBtn}>...</li>;\n// }\nuseEffect(function(){console.log('wow');if(byCategory.length>0){byCategory&&setAllProducts(byCategory);var indexOfLastItem=currentPage*itemsPerPage;var indexOfFirstItem=indexOfLastItem-itemsPerPage;var currentItems=byCategory.slice(indexOfFirstItem,indexOfLastItem);byCategory&&setProductsPerPage(currentItems);}else if(products.data){if(products.data.length>0){products.data&&setAllProducts(products.data);var _indexOfLastItem=currentPage*itemsPerPage;var _indexOfFirstItem=_indexOfLastItem-itemsPerPage;var _currentItems=products.data.slice(_indexOfFirstItem,_indexOfLastItem);products.data&&setProductsPerPage(_currentItems);}}},[products,currentPage,itemsPerPage,byCategory,productInitializer]);useEffect(function(){pageNumberSetter();},[productsPerPage,pageNumberSetter]);return/*#__PURE__*/_jsx(\"div\",{className:styles.root,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.title,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"All products\"}),/*#__PURE__*/_jsx(\"p\",{children:\"ArduRob products for great projects.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.filters,children:/*#__PURE__*/_jsx(Filters,{categories:categories,products:products,subCategories:subCategories,setByCategory:setByCategory,setCurrentPage:setCurrentPage,setProductInitializer:setProductInitializer,productInitializer:productInitializer})}),/*#__PURE__*/_jsxs(\"div\",{className:styles.productList,children:[productsPerPage&&productsPerPage.map(function(product,index){return/*#__PURE__*/_jsx(\"div\",{className:styles.productsContainerInner,children:/*#__PURE__*/_jsx(Link,{to:{pathname:\"/shop/product/\".concat(product._id),state:product},children:/*#__PURE__*/_jsx(ProductBox,{product:product})})},index);}),/*#__PURE__*/_jsx(\"div\",{className:styles.pagesNumbers,children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{className:styles.btns,children:/*#__PURE__*/_jsx(\"button\",{onClick:handlePrevBtn,disabled:currentPage===pageNumbers[0]?true:false,children:\"Prev\"})}),renderPageNumber,/*#__PURE__*/_jsx(\"li\",{className:styles.btns,children:/*#__PURE__*/_jsx(\"button\",{onClick:handleNextBtn,disabled:currentPage===pageNumbers[pageNumbers.length-1]?true:false,children:\"Next\"})})]})})]})]})});};export default ProductList;","map":{"version":3,"sources":["/home/hiorii/Desktop/arduRob/client/src/components/views/Shop/ProductList/ProductList.js"],"names":["React","useState","useEffect","useCallback","styles","Filters","ProductBox","Link","ProductList","products","categories","subCategories","allProducts","setAllProducts","productsPerPage","setProductsPerPage","pageNumbers","setPageNumbers","currentPage","setCurrentPage","itemsPerPage","pageNumberLimit","maxPageNumberLimit","setMaxPageNumberLimit","minPageNumberLimit","setMinPageNumberLimit","byCategory","setByCategory","productInitializer","setProductInitializer","changePage","e","target","id","pageNumberSetter","pages","i","Math","ceil","length","push","renderPageNumber","map","number","activePage","handleNextBtn","handlePrevBtn","console","log","indexOfLastItem","indexOfFirstItem","currentItems","slice","data","root","container","title","filters","productList","product","index","productsContainerInner","pathname","_id","state","pagesNumbers","btns"],"mappings":"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","sourcesContent":["import React, {useState, useEffect, useCallback} from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ProductList.module.scss';\nimport Filters from '../Filters/Filters';\nimport ProductBox from '../ProductBox/ProductBox';\nimport {Link} from 'react-router-dom';\n\nconst ProductList = ({products, categories, subCategories}) => {\n  const [allProducts, setAllProducts] = useState([]);\n  const [productsPerPage, setProductsPerPage] = useState([]);\n  const [pageNumbers, setPageNumbers] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage] = useState(8);\n  const [pageNumberLimit] = useState(5);\n  const [maxPageNumberLimit, setMaxPageNumberLimit] = useState(5);\n  const [minPageNumberLimit, setMinPageNumberLimit] = useState(0);\n  const [byCategory, setByCategory] = useState([]);\n  const [productInitializer, setProductInitializer] = useState(false);\n\n  const changePage = (e) => {\n    setCurrentPage(e.target.id);\n  };\n\n  const pageNumberSetter = useCallback(\n    () => {\n      const pages = [];\n      for(let i=1; i<= Math.ceil(allProducts.length/itemsPerPage);i++) {\n        pages.push(i);\n      }\n      setPageNumbers(pages);\n    },[allProducts.length, itemsPerPage]);\n\n  const renderPageNumber = pageNumbers.map(number => {\n    if (number < maxPageNumberLimit + 1 && number > minPageNumberLimit) {\n      return (\n        <li\n          key={number}\n          id={number}\n          onClick={e => changePage(e)}\n          className={currentPage === number ? styles.activePage : null}\n        >\n          {number}\n        </li>\n      );\n    } else {\n      return null;\n    }\n  });\n\n  const handleNextBtn = () => {\n    setCurrentPage(currentPage + 1);\n\n    if(currentPage + 1 > maxPageNumberLimit) {\n      setMaxPageNumberLimit(maxPageNumberLimit + pageNumberLimit);\n      setMinPageNumberLimit(minPageNumberLimit + pageNumberLimit);\n    }\n  };\n\n  const handlePrevBtn = () => {\n    setCurrentPage(currentPage -1);\n\n    if((currentPage - 1)%pageNumberLimit===0) {\n      setMaxPageNumberLimit(maxPageNumberLimit - pageNumberLimit);\n      setMinPageNumberLimit(minPageNumberLimit - pageNumberLimit);\n    }\n  };\n\n  // let pageIncrementBtn = null;\n  // if (pageNumbers.length > maxPageNumberLimit) {\n  //   pageIncrementBtn = <li onClick={handleNextBtn}>...</li>;\n  // }\n  // let pageDecrementBtn = null;\n  // if (pageNumbers.length > maxPageNumberLimit) {\n  //   pageDecrementBtn = <li onClick={handlePrevBtn}>...</li>;\n  // }\n\n  useEffect(()=> {\n    console.log('wow');\n    if(byCategory.length > 0) {\n      byCategory && setAllProducts(byCategory);\n      const indexOfLastItem = currentPage * itemsPerPage;\n      const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n      const currentItems = byCategory.slice(indexOfFirstItem, indexOfLastItem);\n      byCategory && setProductsPerPage(currentItems);\n    } else if(products.data){\n      if(products.data.length > 0) {\n        products.data && setAllProducts(products.data);\n        const indexOfLastItem = currentPage * itemsPerPage;\n        const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n        const currentItems = products.data.slice(indexOfFirstItem, indexOfLastItem);\n        products.data && setProductsPerPage(currentItems);\n      }\n    }\n  },[products, currentPage, itemsPerPage, byCategory, productInitializer]);\n\n  useEffect(()=> {\n    pageNumberSetter();\n  },[productsPerPage, pageNumberSetter]);\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.container}>\n        <div className={styles.title}>\n          <h1>All products</h1>\n          <p>ArduRob products for great projects.</p>\n        </div>\n        <div className={styles.filters}>\n          <Filters categories={categories} products={products} subCategories={subCategories} setByCategory={setByCategory} setCurrentPage={setCurrentPage} setProductInitializer={setProductInitializer} productInitializer={productInitializer}/>\n        </div>\n        <div className={styles.productList}>\n          {productsPerPage && productsPerPage.map((product,index) => {\n            return (\n              <div\n                key={index}\n                className={styles.productsContainerInner}\n              >\n                <Link\n                  to={{\n                    pathname: `/shop/product/${product._id}`,\n                    state: product,\n                  }}\n                >\n                  <ProductBox product={product}/>\n                </Link>\n              </div>\n            );\n          })}\n          <div className={styles.pagesNumbers}>\n            <ul>\n              <li className={styles.btns}>\n                <button\n                  onClick={handlePrevBtn}\n                  disabled={currentPage === pageNumbers[0] ? true : false}\n                >\n                  Prev\n                </button>\n              </li>\n              {/*{pageIncrementBtn}*/}\n              {renderPageNumber}\n              {/*{pageDecrementBtn}*/}\n              <li className={styles.btns}>\n                <button\n                  onClick={handleNextBtn}\n                  disabled={currentPage === pageNumbers[pageNumbers.length - 1] ? true : false}\n                >\n                  Next\n                </button>\n              </li>\n            </ul>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nProductList.propTypes = {\n  categories: PropTypes.object,\n  products: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object,\n  ]),\n  subCategories: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object,\n  ]),\n};\n\nexport default ProductList;\n"]},"metadata":{},"sourceType":"module"}
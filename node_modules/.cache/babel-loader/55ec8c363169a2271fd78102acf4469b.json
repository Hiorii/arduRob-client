{"ast":null,"code":"import _slicedToArray from\"/home/hiorii/Desktop/arduRob/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import styles from'./Filters.module.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Filters=function Filters(_ref){var categories=_ref.categories,products=_ref.products,subCategories=_ref.subCategories,setByCategory=_ref.setByCategory,setCurrentPage=_ref.setCurrentPage,setProductInitializer=_ref.setProductInitializer,productInitializer=_ref.productInitializer;var allCategories=categories===null||categories===void 0?void 0:categories.data;var allProducts=products.data;var allSubcategories=subCategories;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),filteredCategoryProducts=_useState2[0],setFilteredCategoryProducts=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),initializer=_useState4[0],setInitializer=_useState4[1];var filterByCategory=function filterByCategory(subCategoryName){if(subCategoryName==='all'){setFilteredCategoryProducts(allProducts);}else{var filteredAllProducts=allProducts.filter(function(product){var _product$subCategoryI;return(product===null||product===void 0?void 0:(_product$subCategoryI=product.subCategoryId)===null||_product$subCategoryI===void 0?void 0:_product$subCategoryI.name)===subCategoryName;});setFilteredCategoryProducts(filteredAllProducts);}};var sortProducts=function sortProducts(e){if(e.currentTarget.value==='Name - A-Z'){filteredCategoryProducts.sort(function(a,b){return a.name.localeCompare(b.name);});}else if(e.currentTarget.value==='Name - Z-A'){filteredCategoryProducts.sort(function(a,b){return b.name.localeCompare(a.name);});}else if(e.currentTarget.value==='Price - Lowest to Highest'){filteredCategoryProducts.sort(function(a,b){return a.price>b.price?1:b.price>a.price?-1:0;});}else if(e.currentTarget.value==='Price - Highest to Lowest'){filteredCategoryProducts.sort(function(a,b){return a.price<b.price?1:b.price<a.price?-1:0;});}else{return null;}setInitializer(!initializer);};useEffect(function(){setByCategory(filteredCategoryProducts);setCurrentPage(1);setProductInitializer(!productInitializer);},[filteredCategoryProducts,initializer]);useEffect(function(){setFilteredCategoryProducts(allProducts);},[]);return/*#__PURE__*/_jsxs(\"div\",{className:styles.root,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.category,children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Products\"}),/*#__PURE__*/_jsx(\"p\",{className:styles.cat,onClick:function onClick(){return filterByCategory('all');},children:\"All Products\"}),allCategories&&allCategories.map(function(category,index){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:styles.cat,children:category.name},index),/*#__PURE__*/_jsx(\"div\",{children:allSubcategories===null||allSubcategories===void 0?void 0:allSubcategories.filter(function(sub){return sub.categoryId.name===category.name;}).map(function(subcat,indeks){return/*#__PURE__*/_jsxs(\"p\",{className:styles.subCat,onClick:function onClick(){return filterByCategory(subcat.name);},children:[\"- \",subcat.name]},indeks);})})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.sortBy,children:/*#__PURE__*/_jsxs(\"select\",{defaultValue:'DEFAULT',onChange:function onChange(e){return sortProducts(e);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Sort by\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Price - Lowest to Highest\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Price - Highest to Lowest\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Name - A-Z\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Name - Z-A\"})]})})]});};export default Filters;","map":{"version":3,"sources":["/home/hiorii/Desktop/arduRob/client/src/components/views/Shop/Filters/Filters.js"],"names":["React","useState","useEffect","styles","Filters","categories","products","subCategories","setByCategory","setCurrentPage","setProductInitializer","productInitializer","allCategories","data","allProducts","allSubcategories","filteredCategoryProducts","setFilteredCategoryProducts","initializer","setInitializer","filterByCategory","subCategoryName","filteredAllProducts","filter","product","subCategoryId","name","sortProducts","e","currentTarget","value","sort","a","b","localeCompare","price","root","category","cat","map","index","sub","categoryId","subcat","indeks","subCat","sortBy"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './Filters.module.scss';\n\nconst Filters = ({categories, products, subCategories, setByCategory, setCurrentPage, setProductInitializer, productInitializer}) => {\n  const allCategories = categories?.data;\n  const allProducts = products.data;\n  const allSubcategories = subCategories;\n  const [filteredCategoryProducts, setFilteredCategoryProducts] = useState([]);\n  const [initializer, setInitializer] = useState(false);\n\n  const filterByCategory = (subCategoryName) => {\n    if (subCategoryName === 'all') {\n      setFilteredCategoryProducts(allProducts);\n    } else {\n      const filteredAllProducts = allProducts.filter(product => product?.subCategoryId?.name === subCategoryName);\n      setFilteredCategoryProducts(filteredAllProducts);\n    }\n  };\n  const sortProducts = e => {\n    if (e.currentTarget.value === 'Name - A-Z') {\n      filteredCategoryProducts.sort((a, b) => a.name.localeCompare(b.name));\n    } else if (e.currentTarget.value === 'Name - Z-A') {\n      filteredCategoryProducts.sort((a, b) => b.name.localeCompare(a.name));\n    } else if (e.currentTarget.value === 'Price - Lowest to Highest') {\n      filteredCategoryProducts.sort((a, b) => (a.price > b.price ? 1 : b.price > a.price ? -1 : 0));\n    } else if (e.currentTarget.value === 'Price - Highest to Lowest') {\n      filteredCategoryProducts.sort((a, b) => (a.price < b.price ? 1 : b.price < a.price ? -1 : 0));\n    } else {\n      return null;\n    }\n    setInitializer(!initializer);\n  };\n\n  useEffect(()=> {\n\n    setByCategory(filteredCategoryProducts);\n    setCurrentPage(1);\n    setProductInitializer(!productInitializer);\n  },[filteredCategoryProducts, initializer]);\n\n  useEffect(()=> {\n    setFilteredCategoryProducts(allProducts);\n  },[]);\n\n  return (\n    <div className={styles.root}>\n      <div className={styles.category}>\n        <h3>Products</h3>\n        <p className={styles.cat} onClick={()=>filterByCategory('all')}>All Products</p>\n        {allCategories && allCategories.map((category, index) => {\n          return (\n            <>\n              <p key={index} className={styles.cat}>{category.name}</p>\n              <div>\n                {allSubcategories?.filter(sub => sub.categoryId.name === category.name).map((subcat, indeks) => {\n                  return (\n                    <p key={indeks} className={styles.subCat} onClick={()=>filterByCategory(subcat.name)}>- {subcat.name}</p>\n                  );\n                })}\n              </div>\n            </>\n          );\n        })}\n      </div>\n      <div className={styles.sortBy}>\n        <select defaultValue={'DEFAULT'} onChange={e => sortProducts(e)}>\n          <option value='' disabled>\n            Sort by\n          </option>\n          <option>Price - Lowest to Highest</option>\n          <option>Price - Highest to Lowest</option>\n          <option>Name - A-Z</option>\n          <option>Name - Z-A</option>\n        </select>\n      </div>\n    </div>\n  );\n};\n\nFilters.propTypes = {\n  categories: PropTypes.object,\n  products: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object,\n  ]),\n  subCategories: PropTypes.oneOfType([\n    PropTypes.array,\n    PropTypes.object,\n  ]),\n  setByCategory: PropTypes.func,\n  setCurrentPage: PropTypes.func,\n  setProductInitializer: PropTypes.func,\n  productInitializer: PropTypes.bool,\n};\n\nexport default Filters;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/home/hiorii/Desktop/arduRob/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/hiorii/Desktop/arduRob/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{initialState}from'./initialState';import axios from'axios';import{API_URL}from'../config';/* selectors */export var getAllCart=function getAllCart(){return JSON.parse(localStorage.getItem('cart'));};export var cartTotalQuantity=function cartTotalQuantity(){var _JSON$parse,_JSON$parse$data;return(_JSON$parse=JSON.parse(localStorage.getItem('cart')))===null||_JSON$parse===void 0?void 0:(_JSON$parse$data=_JSON$parse.data)===null||_JSON$parse$data===void 0?void 0:_JSON$parse$data.map(function(product){return product.cartQuantiy;});};/* action name creator */var reducerName='cart';var createActionName=function createActionName(name){return\"app/\".concat(reducerName,\"/\").concat(name);};/* action types */var HANDLE_ADD_QUANTITY=createActionName('HANDLE_ADD_QUANTITY');var HANDLE_MINUS_QUANTITY=createActionName('HANDLE_MINUS_QUANTITY');var HANDLE_CLEAR_ITEM=createActionName('HANDLE_CLEAR_ITEM');/* action creators */export var handleAddQuantity=function handleAddQuantity(payload){return{payload:payload,type:HANDLE_ADD_QUANTITY};};export var handleMinusQuantity=function handleMinusQuantity(payload){return{payload:payload,type:HANDLE_MINUS_QUANTITY};};export var handleClear=function handleClear(payload){return{payload:payload,type:HANDLE_CLEAR_ITEM};};/* thunk creators */export var sendOrder=function sendOrder(order){return/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;console.log(order);_context.next=4;return axios.post(\"\".concat(API_URL,\"/cart\"),order);case 4:_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));};/* reducer */export var reducer=function reducer(){var statePart=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};switch(action.type){case HANDLE_ADD_QUANTITY:{var cartItems=JSON.parse(localStorage.getItem('cart')).data;var products=JSON.parse(localStorage.getItem('products')).data;var updatedItems=cartItems.map(function(product){if(product._id===action.payload){product.cartQuantiy=product.cartQuantiy+1;var newItems=products.map(function(item){if(item._id===product._id){item.cartQuantiy=item.cartQuantiy+1;return item;}else{return item;}});localStorage.setItem('products',JSON.stringify({data:newItems}));return product;}else{return product;}});localStorage.setItem('cart',JSON.stringify({data:updatedItems}));return statePart;}case HANDLE_MINUS_QUANTITY:{var _cartItems=JSON.parse(localStorage.getItem('cart')).data;var _products=JSON.parse(localStorage.getItem('products')).data;var _updatedItems=_cartItems.map(function(product){if(product._id===action.payload){if(product.cartQuantiy>1){product.cartQuantiy=product.cartQuantiy-1;var newItems=_products.map(function(item){if(item._id===product._id){item.cartQuantiy=item.cartQuantiy-1;return item;}else{return item;}});localStorage.setItem('products',JSON.stringify({data:newItems}));}return product;}else{return product;}});localStorage.setItem('cart',JSON.stringify({data:_updatedItems}));return statePart;}case HANDLE_CLEAR_ITEM:{var _cartItems2=JSON.parse(localStorage.getItem('cart')).data;var _products2=JSON.parse(localStorage.getItem('products')).data;var itemToRemove=_cartItems2.findIndex(function(product){return product._id===action.payload;});_cartItems2.splice(itemToRemove,1);localStorage.setItem('cart',JSON.stringify({data:_cartItems2}));var newItems=_products2.map(function(item){if(item._id===action.payload){item.cartQuantiy=0;return item;}else{return item;}});localStorage.setItem('products',JSON.stringify({data:newItems}));return statePart;}default:return statePart;}};","map":{"version":3,"sources":["/home/hiorii/Desktop/arduRob/client/src/redux/cartRedux.js"],"names":["initialState","axios","API_URL","getAllCart","JSON","parse","localStorage","getItem","cartTotalQuantity","data","map","product","cartQuantiy","reducerName","createActionName","name","HANDLE_ADD_QUANTITY","HANDLE_MINUS_QUANTITY","HANDLE_CLEAR_ITEM","handleAddQuantity","payload","type","handleMinusQuantity","handleClear","sendOrder","order","console","log","post","reducer","statePart","action","cartItems","products","updatedItems","_id","newItems","item","setItem","stringify","itemToRemove","findIndex","splice"],"mappings":"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","sourcesContent":["import {initialState} from './initialState';\nimport axios from 'axios';\nimport {API_URL} from '../config';\n\n/* selectors */\nexport const getAllCart = () => JSON.parse(localStorage.getItem('cart'));\nexport const cartTotalQuantity = () => JSON.parse(localStorage.getItem('cart'))?.data?.map(product => product.cartQuantiy);\n\n/* action name creator */\nconst reducerName = 'cart';\nconst createActionName = name => `app/${reducerName}/${name}`;\n\n/* action types */\nconst HANDLE_ADD_QUANTITY = createActionName('HANDLE_ADD_QUANTITY');\nconst HANDLE_MINUS_QUANTITY = createActionName('HANDLE_MINUS_QUANTITY');\nconst HANDLE_CLEAR_ITEM = createActionName('HANDLE_CLEAR_ITEM');\n\n/* action creators */\nexport const handleAddQuantity = payload => ({ payload, type: HANDLE_ADD_QUANTITY });\nexport const handleMinusQuantity = payload => ({ payload, type: HANDLE_MINUS_QUANTITY });\nexport const handleClear = payload => ({ payload, type: HANDLE_CLEAR_ITEM });\n\n/* thunk creators */\nexport const sendOrder = (order) => {\n  return async() => {\n    try {\n      console.log(order);\n      await axios.post(`${API_URL}/cart`, order);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n};\n\n\n/* reducer */\nexport const reducer = (statePart = initialState, action = {}) => {\n  switch (action.type) {\n    case HANDLE_ADD_QUANTITY: {\n      const cartItems = JSON.parse(localStorage.getItem('cart')).data;\n      const products = JSON.parse(localStorage.getItem('products')).data;\n      const updatedItems = cartItems.map(product => {\n        if(product._id === action.payload) {\n          product.cartQuantiy = product.cartQuantiy + 1;\n          const newItems = products.map(item => {\n            if(item._id === product._id) {\n              item.cartQuantiy = item.cartQuantiy + 1;\n              return item;\n            } else {\n              return item;\n            }\n          });\n          localStorage.setItem('products', JSON.stringify({data: newItems}));\n          return product;\n        } else {\n          return product;\n        }\n      });\n      localStorage.setItem('cart', JSON.stringify({data: updatedItems}));\n      return statePart;\n    }\n    case HANDLE_MINUS_QUANTITY: {\n      const cartItems = JSON.parse(localStorage.getItem('cart')).data;\n      const products = JSON.parse(localStorage.getItem('products')).data;\n      const updatedItems = cartItems.map(product => {\n        if(product._id === action.payload) {\n          if(product.cartQuantiy > 1) {\n            product.cartQuantiy = product.cartQuantiy - 1;\n            const newItems = products.map(item => {\n              if(item._id === product._id) {\n                item.cartQuantiy = item.cartQuantiy - 1;\n                return item;\n              } else {\n                return item;\n              }\n            });\n            localStorage.setItem('products', JSON.stringify({data: newItems}));\n          }\n          return product;\n        } else {\n          return product;\n        }\n      });\n      localStorage.setItem('cart', JSON.stringify({data: updatedItems}));\n      return statePart;\n    }\n    case HANDLE_CLEAR_ITEM: {\n      const cartItems = JSON.parse(localStorage.getItem('cart')).data;\n      const products = JSON.parse(localStorage.getItem('products')).data;\n      const itemToRemove = cartItems.findIndex(product =>\n        product._id === action.payload\n      );\n      cartItems.splice(itemToRemove,1);\n      localStorage.setItem('cart', JSON.stringify({data: cartItems}));\n      const newItems = products.map(item => {\n        if(item._id === action.payload) {\n          item.cartQuantiy = 0;\n          return item;\n        } else {\n          return item;\n        }\n      });\n      localStorage.setItem('products', JSON.stringify({data: newItems}));\n      return statePart;\n    }\n    default:\n      return statePart;\n  }\n};\n"]},"metadata":{},"sourceType":"module"}